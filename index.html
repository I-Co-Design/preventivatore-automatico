<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>PREVENTIVATORE AUTOMATICO PROGETTO PROLUNGHE</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f7f7f7; }
        .container { max-width: 800px; margin: 40px auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 8px #bbb; padding: 30px; }
        h1 { text-align: center; color: #003366; }
        .logo { display: block; margin: 0 auto 20px; width: 180px; }
        .hidden { display: none; }
        .form-group { margin-bottom: 18px; }
        label { font-weight: bold; display: block; margin-bottom: 6px; }
        input, select { width: 100%; padding: 8px; }
        button { background: #003366; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; font-size: 16px; cursor: pointer; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .category { background: #eef; margin-bottom: 20px; padding: 15px; border-radius: 6px; }
        .preview { background: #ffe; padding: 18px; border-radius: 8px; margin-bottom: 18px; }
        .success { color: green; font-weight: bold; text-align: center; padding: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://www.pasolini.it/wp-content/uploads/2020/04/logo-pasolini.png" class="logo" alt="PASOLINI Logo">
        <h1>PREVENTIVATORE AUTOMATICO<br>PROGETTO PROLUNGHE</h1>

        <div id="login-section">
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password">
            </div>
            <button onclick="checkLogin()">Accedi</button>
        </div>

        <div id="cliente-section" class="hidden">
            <div class="form-group">
                <label for="nomePuntoVendita">Nome Punto Vendita</label>
                <input type="text" id="nomePuntoVendita">
            </div>
            <div class="form-group">
                <label for="fatturazione">Fatturazione</label>
                <input type="text" id="fatturazione">
            </div>
            <div class="form-group">
                <label for="linea">Seleziona Linea Prodotto</label>
                <select id="linea"></select>
            </div>
            <button onclick="startPreventivo()">Avanti</button>
        </div>

        <div id="preventivo-section" class="hidden">
            <div id="prodotti-list"></div>
            <button onclick="aggiungiLinea()">Aggiungi unâ€™altra linea prodotto</button>
            <button onclick="mostraAnteprima()">Concludi preventivo</button>
        </div>

        <div id="anteprima-section" class="hidden">
            <div class="preview" id="riepilogo"></div>
            <div class="form-group">
                <label for="emailCliente">Inserisci la tua email</label>
                <input type="email" id="emailCliente" required>
            </div>
            <button onclick="inviaPreventivo()">Invia preventivo</button>
        </div>

        <div id="conferma-section" class="hidden">
            <div class="success">Preventivo inviato con successo. Grazie!</div>
        </div>
    </div>

    <script>
        // Password di accesso
        const PASSWORD = "PASOLINI2025";

        // Database dei prodotti con i dati forniti
        const prodotti = {
            "linee": {
                "PASOLINI_MEP": {
                    "categorie": {
                        "RIPIANI DA 40": [
                            { "codice": "4320232/8", "descrizione": "RIPIANO LAMIERA 750X400 LISCIO VERNICIATO RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 18.24 },
                            { "codice": "4320432/8", "descrizione": "RIPIANO LAMIERA 750X400 FORATO VERNICIATO RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 14.68 },
                            { "codice": "4320234/8", "descrizione": "RIPIANO LAMIERA 1000X400 LISCIO VERNICIATO RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 24.80 },
                            { "codice": "4320434/8", "descrizione": "RIPIANO LAMIERA 1000X400 FORATO VERNICIATO RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 23.46 },
                            { "codice": "4320236/8", "descrizione": "RIPIANO LAMIERA 1330X400 LISCIO VERNICIATO RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 24.18 },
                            { "codice": "4320436/8", "descrizione": "RIPIANO LAMIERA 1330X400 FORATO VERNICIATO RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 19.47 }
                        ],
                        "PROLUNGHE": [
                            { "codice": "4200544", "descrizione": "PROLUNGA PER MONTANTE SAGOMATO 250x90 VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 15.15 },
                            { "codice": "5007780", "descrizione": "PROLUNGA PER MONTANTE SAGOMATO 250x45 VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 9.81 },
                            { "codice": "4200546", "descrizione": "PROLUNGA PER MONTANTE SAGOMATO 430x90 VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 20.45 },
                            { "codice": "5007782", "descrizione": "PROLUNGA PER MONTANTE SAGOMATO 430x45 VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 13.88 }
                        ],
                        "SCHIENALI": [
                            { "codice": "4280022", "descrizione": "SCHIENALE DA 750X250 MM VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 8.01 },
                            { "codice": "4280024", "descrizione": "SCHIENALE DA 1000X250 MM VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 8.64 },
                            { "codice": "4280032", "descrizione": "SCHIENALE DA 750X430 MM VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 9.05 },
                            { "codice": "4280034", "descrizione": "SCHIENALE DA 1000X430 MM VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 11.34 },
                            { "codice": "4280026", "descrizione": "SCHIENALE DA 1330X250 MM VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 10.18 },
                            { "codice": "4280036", "descrizione": "SCHIENALE DA 1330X430 MM VERNICIATO  RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 16.86 }
                        ],
                        "MENSOLE": [
                            { "codice": "4360026", "descrizione": "MENSOLA 400MM (FERRO) RAL 9010 BUCCIATO", "colore": "BIANCO RAL 9010 BUCCIATO", "prezzo": 4.23 }
                        ],
                        "BARRE": [
                            { "codice": "5007020", "descrizione": "BARRA 750mm", "colore": "CROMATE", "prezzo": 10.68 },
                            { "codice": "5007022", "descrizione": "BARRA 1000mm", "colore": "CROMATE", "prezzo": 12.90 },
                            { "codice": "5007024", "descrizione": "BARRA 1330mm", "colore": "CROMATE", "prezzo": 17.25 }
                        ],
                        "GANCI": [
                            { "codice": "5007010.1", "descrizione": "GANCIO DA 30cm Diam. 8 mm", "colore": "CROMATI", "prezzo": 2.71 }
                        ],
                        "PORTAPREZZI": [
                            { "codice": "DRA39.1102", "descrizione": "PORTA PREZZO HL PER GANCIO 7,5x3,9cm", "colore": "TRASPARENTE", "prezzo": 0.21 },
                            { "codice": "MPS.42.0742.BL", "descrizione": "PORTASCANNER 750mm BLU", "colore": "BLU", "prezzo": 1.91 },
                            { "codice": "MPS.42.0992.BL", "descrizione": "PORTASCANNER 1000mm BLU", "colore": "BLU", "prezzo": 2.44 },
                            { "codice": "MPS.42.1318.BL", "descrizione": "PORTASCANNER 1330mm BLU", "colore": "BLU", "prezzo": 2.71 }
                        ]
                    }
                },
                "INTRAC": {
                    "categorie": {
                        "RIPIANI DA 40": [
                            { "codice": "4320234/8.7035", "descrizione": "RIPIANO LAMIERA 1000X400 LISCIO VERNICIATO RAL
